# ๐ก๏ธ Warehouse Security Pattern: Proxy, Deception & Monitoring

![Python](https://img.shields.io/badge/Python-3.11-blue?style=flat&logo=python)
![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?style=flat&logo=docker)
![Prometheus](https://img.shields.io/badge/Prometheus-Monitoring-E6522C?style=flat&logo=prometheus)
![Grafana](https://img.shields.io/badge/Grafana-Dashboard-F46800?style=flat&logo=grafana)

**ะัะพะณัะฐะผะผะฝะพ-ะฐะฟะฟะฐัะฐัะฝัะน ะบะพะผะฟะปะตะบั ะดะปั ะทะฐัะธัั ััะทะฒะธะผัั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะน ะธ ัะตัะฒะธัะพะฒ.**

ะัะพะตะบั ัะตะฐะปะธะทัะตั ะฟะฐััะตัะฝ **Security Proxy** ั ัะปะตะผะตะฝัะฐะผะธ **Cyber Deception** (Honeypot) ะธ **Obfuscation**. ะะฝ ัะบััะฒะฐะตั ัะตะฐะปัะฝัั ะฐััะธัะตะบัััั ะปะตะณะฐัะธ-ะฟัะธะปะพะถะตะฝะธั ("Warehouse ERP"), ะฟะพะดะผะตะฝัะตั ะทะฐะณะพะปะพะฒะบะธ, ัะผัะปะธััะตั ะปะพะถะฝัะต ัะตัะตะฒัะต ัะปัะถะฑั ะธ ะพะฑะตัะฟะตัะธะฒะฐะตั ะฟะพะปะฝัะน ะผะพะฝะธัะพัะธะฝะณ ะธะฝัะธะดะตะฝัะพะฒ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ.

---

## ๐๏ธ ะััะธัะตะบัััะฐ

ะกะธััะตะผะฐ ะฟะพัััะพะตะฝะฐ ะฝะฐ ะผะธะบัะพัะตัะฒะธัะฐั ะฒ Docker. ะะฝะตัะฝะธะน ะดะพัััะฟ ะบ ััะทะฒะธะผะพะผั ะฟัะธะปะพะถะตะฝะธั ะฟะพะปะฝะพัััั ะทะฐะบััั ะธ ะพัััะตััะฒะปัะตััั ัะพะปัะบะพ ัะตัะตะท ะทะฐัะธัะตะฝะฝัะน Proxy-ัะปัะท.

```mermaid
graph LR
    User((Attacker/User)) -->|Public Net| Proxy[๐ก๏ธ Security Proxy]
    Proxy -->|Internal Net| App[๐ฆ Vulnerable App]
    Proxy -.->|Metrics| Prom[๐ฅ Prometheus]
    Prom -.->|Data| Graf[๐ Grafana]
    Proxy -.->|Logs| File[๐ Log File]
```

ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั:

๐ฆ **Application (Vulnerable Target):**

- ะญะผัะปััะธั Legacy-ัะธััะตะผั (ERP).
- ะัะบััััะต ััะทะฒะธะผัะต ะฟะพััั: 5000 (Web), 5001 (DB), 5002 (Admin).
- ะะพะปะฝะพัััั ะธะทะพะปะธัะพะฒะฐะฝ ะฒะพ ะฒะฝัััะตะฝะฝะตะน ัะตัะธ `internal-net`.

๐ก๏ธ **Security Proxy (The Core):**

- Python-ะฟัะธะปะพะถะตะฝะธะต ะฝะฐ ััััั ัะพะบะตัะฐั.
- Port 9000 (Web): ะะฐะฑะพัะฐะตั ะบะฐะบ WAF/Filter. ะััะตะทะฐะตั ะทะฐะณะพะปะพะฒะบะธ ัะตัะฒะตัะฐ (`Server: Warehouse`), ัะบััะฒะฐะตั ะฒะตััะธะธ ะะ.
- Port 9001 (DB) & 9002 (Admin): ะะฐะฑะพัะฐัั ะบะฐะบ Honeypot. ะญะผัะปะธัััั SSH ะธ Telnet ัะตัะฒะธัั, ัะพะฑะธัะฐั ะดะฐะฝะฝัะต ะพะฑ ะฐัะฐะบะฐั ะธ ะฒะฒะพะดั ะทะปะพัะผััะปะตะฝะฝะธะบะฐ ะฒ ะทะฐะฑะปัะถะดะตะฝะธะต.
- Logging: ะะธัะตั ะฐัะดะธั ะฒัะตั ัะพะฑััะธะน ะฝะฐ ะดะธัะบ.

๐ **Monitoring Stack:**

- Prometheus: ะกะฑะพั ะผะตััะธะบ ั ะฟัะพะบัะธ ะบะฐะถะดัะต 5 ัะตะบัะฝะด.
- Grafana: ะะธะทัะฐะปะธะทะฐัะธั ะฐัะฐะบ (SOC Dashboard).

๐ **ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ะฒะพะทะผะพะถะฝะพััะธ**

### 1. Cyber Deception (ะะฑะผะฐะฝ ะทะปะพัะผััะปะตะฝะฝะธะบะฐ)
ะะผะตััะพ ะทะฐะบัััะธั ะฟะพััะพะฒ, ัะธััะตะผะฐ ะดะตัะถะธั ะธั ะพัะบััััะผะธ ะดะปั ัะฑะพัะฐ Threat Intelligence.

- ะัะธ ะฟะพะฟััะบะต ะฒะทะปะพะผะฐ ะะฐะทั ะะฐะฝะฝัั (ะฟะพัั 9001) ัะฐะบะตั ะฒะธะดะธั ัะตะนะบะพะฒัะน ะฑะฐะฝะฝะตั `SSH-2.0-OpenSSH`.
- ะญัะพ ะทะฐััะฐะฒะปัะตั ัะบะฐะฝะตัั ััะทะฒะธะผะพััะตะน (Nmap/Nessus) ะฒัะดะฐะฒะฐัั ะปะพะถะฝัะต ะพััะตัั ะธ ััะฐัะธัั ะฒัะตะผั ะฝะฐ ะฟะพะดะฑะพั ะฟะฐัะพะปะตะน ะบ ะฝะตัััะตััะฒัััะตะผั ัะตัะฒะธัั.

### 2. Obfuscation (ะะฐะฟัััะฒะฐะฝะธะต)
ะะฐ ะฒะตะฑ-ะฟะพััั (9000) ะฟัะพะบัะธ ะฝะฐ ะปะตัั ะฟะตัะตัะฒะฐััะฒะฐะตั HTTP-ะพัะฒะตัั:

- ะฃะดะฐะปัะตั ะทะฐะณะพะปะพะฒะบะธ `Server: Warehouse Internal`.
- ะะฐะผะตะฝัะตั ะธั ะฝะฐ `Server: Apache/2.4`.
- ะกะบััะฒะฐะตั ัะฟะพะผะธะฝะฐะฝะธั "Legacy Backend" ะฒ HTML-ะบะพะดะต.

### 3. Observability & Audit

- ะะตััะธะบะธ: RPS, ะบะพะปะธัะตััะฒะพ ะฟะตัะตัะฒะฐัะตะฝะฝัั ะฐัะฐะบ, ัะธะฟั ะฐัะฐะบ.
- ะะพะณะธ: ะะพะปะฝัะน ะถััะฝะฐะป ัะพะฑััะธะน (`logs/security_events.log`) ั IP-ะฐะดัะตัะฐะผะธ ะธ ะฒัะตะผะตะฝะฝัะผะธ ะผะตัะบะฐะผะธ.

๐๏ธ **ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ**

### ะขัะตะฑะพะฒะฐะฝะธั
- Docker & Docker Compose
- Python 3 (ะดะปั ะทะฐะฟััะบะฐ ัะตััะพะฒัั ัะบัะธะฟัะพะฒ)

### ะะฐะฟััะบ
ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน:

```bash
git clone https://github.com/artemlen/OpenPortsSecurity.git
cd OpenPortsSecurity
```

ะะฐะฟัััะธัะต ััะตะบ ะบะพะฝัะตะนะฝะตัะพะฒ:

```bash
docker-compose up -d --build
```

ะัะพะฒะตัััะต ััะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ:

```bash
docker ps
```

๐งช **ะขะตััะธัะพะฒะฐะฝะธะต ะธ ะะตะผะพะฝัััะฐัะธั**

### 1. ะะตะฝะตัะฐัะธั ััะฐัะธะบะฐ (ะัะฐะบะฐ)
ะ ะฟัะพะตะบัะต ะตััั ัะบัะธะฟั ะดะปั ะฝะฐะณััะทะพัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะธ ัะผัะปััะธะธ ะฐัะฐะบ. ะะฐะฟัััะธัะต ะตะณะพ, ััะพะฑั ัะฒะธะดะตัั ะดะฐะฝะฝัะต ะฝะฐ ะณัะฐัะธะบะฐั:

```bash
python scanner.py
```

ะกะบัะธะฟั ะฝะฐัะฝะตั ะพัะฟัะฐะฒะปััั ะทะฐะฟัะพัั ะฝะฐ ะฟะพััั 9000, 9001, 9002.

### 2. ะะพัััะฟ ะบ ะดะฐัะฑะพัะดะฐะผ
ะัะบัะพะนัะต Grafana ะฒ ะฑัะฐัะทะตัะต:

- URL: http://localhost:3000
- Login: admin
- Password: admin

ะัะตะดะฝะฐัััะพะตะฝะฝัะน ะดะฐัะฑะพัะด ะฟะพะบะฐะถะตั ะบะพะปะธัะตััะฒะพ ะพััะฐะถะตะฝะฝัั ะฐัะฐะบ, ัะฐัะฟัะตะดะตะปะตะฝะธะต ัะตะปะตะน ะธ ัะบะพัะพััั ะทะฐะฟัะพัะพะฒ.

### 3. ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ
ะะพะณะธ ัะพััะฐะฝััััั ะฒ ะฟะฐะฟะบั `proxy_logs` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ.

```bash
tail -f proxy_logs/security_events.log
```

ะัะธะผะตั ะปะพะณะฐ:

```text
[2023-10-27 15:45:12] 172.18.0.1      -> :9001 | HONEYPOT_TRIGGER     | ะัะฐะบะฐ ะฟะตัะตัะฒะฐัะตะฝะฐ. ะคะตะนะบ: SSH-2.0...
[2023-10-27 15:45:13] 172.18.0.1      -> :9000 | OBFUSCATION          | ะกะบัััั ะทะฐะณะพะปะพะฒะบะธ 'Warehouse'
```

๐ **ะกัััะบัััะฐ ะฟัะพะตะบัะฐ**

```text
warehouse-security-pattern/
โโโ app/                 
โ   โโโ app.py                # ะกะฐะผะพ ะทะฐัะธัะฐะตะผะพะต ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ Dockerfile.app        # ะะตะพะฑัะพะดะธะผ ะดะปั ัะฑะพัะบะธ ะพะฑัะฐะทะฐ ะบะพะฝัะตะนะฝะตัะฐ
โโโ monitoring/              
โโโ proxy/               
โ   โโโ Dockerfile.proxy      # ะะตะพะฑัะพะดะธะผ ะดะปั ัะฑะพัะบะธ ะพะฑัะฐะทะฐ ะบะพะฝัะตะนะฝะตัะฐ
โ   โโโ security.py           # ะะพะดัะปั ะทะฐัะธัั
โโโ proxy_logs/ 
โ   โโโ security_events.log   # ะะพะณะธ ะผะพะดัะปั ะทะฐัะธัั
โโโ scanner/   
โ   โโโ scanner.py            # ะัะฟะพะปะฝัะตั ะทะฐะฟัะพะพัั ะฝะฐ ะฟะพััั ั ะฟะพะดัะพะฑะฝัะผ ะพััะตัะพะผ ะฟะพ ะฝะฐะนะดะตะฝะฝัะผ ััะทะฒะธะผะพัััะผ (ะผะพะดัะปั ะฝะฐะฟะฐะดะตะฝะธั)
โ   โโโ spam.py               # ะะพะถะฝะพ ะฒัะฟะพะปะธะฝัั, ะตัะปะธ ะฝัะถะฝะพ ะผะฝะพะณะพ ััะฐัััั ะทะฐะฟัะพัะพะฒ ะฝะฐ ะฟะพััั
โโโ docker-compose.yml        # ะัะบะตัััะฐัะธั
โโโ recon_report.json         # ะคะฐะนะป ะพััะตัะฐ scanner.py
โโโ README.md
```

๐จโ๐ป **ะะฒัะพั**
ะะฐะทัะฐะฑะพัะฐะฝะพ ะฒ ัะฐะผะบะฐั ััะตะฑะฝะพะณะพ ะฟัะพะตะบัะฐ ะฟะพ ะดะธััะธะฟะปะธะฝะต "ะะฐะทัะฐะฑะพัะบะฐ ะธ ะะฝัะตะณัะฐัะธั", ะฐ ัะฐะบะถะต "ะะธัััะฐะปะธะทะฐัะธั ะธ ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั".
